module at.jku.cis.mttf.model.GenerateMttf

import org.eclipse.emf.mwe.utils.*
import org.eclipse.emf.mwe.utils.*
import org.eclipse.xtext.xtext.generator.*
import org.eclipse.xtext.generator.*

var projectName = "at.jku.cis.mttf.model"
var projectPath = "../${projectName}"

var myPath = "${projectName}/src/main/java/at/jku/cis/mttf/model"
var resPath = "${projectName}/src/main/resources"

var encoding = "UTF-8"
var lineDelimiter = "\n"
var fileHeader = "/*\n * generated by Xtext \${version}\n */"

var myGenModel = "platform:/resource/${resPath}/${projectName}.genmodel"

Workflow {
    bean = StandaloneSetup {
		scanClassPath = true
		projectMapping = { projectName = 'at.jku.cis.mttf.model' path = '${projectPath}/../at.jku.cis.mttf.model' }
		registerGenModelFile = "${myGenModel}"
	}
	
	component = DirectoryCleaner {
		directory = "${myPath}"
	}
	
	component = org.eclipse.emf.mwe2.ecore.EcoreGenerator {
		genModel = "${myGenModel}"
		srcPath = "platform:/resource/${myPath}"
	}
	
}
